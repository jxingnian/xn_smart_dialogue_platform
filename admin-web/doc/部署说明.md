# 知境中枢 - 管理端部署说明

## 技术栈

- Vue 3.4+
- TypeScript 5+
- Vite 5+
- Element Plus 2+
- Pinia
- Vue Router

## 环境要求

- Node.js 20+
- pnpm / npm / yarn

### 安装 Node.js（如未安装）

推荐使用 nvm 安装，可以方便管理多个 Node.js 版本。

Ubuntu/Debian/macOS:
```bash
# 安装 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash

# 重新加载 shell 配置
source ~/.bashrc

# 安装 Node.js 20
nvm install 20

# 验证版本
node -v   # 应显示 v20.x.x
npm -v    # 应显示 v10.x.x
```

Windows:
从 https://nodejs.org/ 下载 LTS 版本安装包。

## 本地开发

1. 进入前端目录
```bash
cd admin-web
```

2. 安装依赖
```bash
pnpm install
# 或
npm install
```

3. 启动开发服务器
```bash
pnpm dev
# 或
npm run dev
```

4. 访问
```
http://localhost:3000
```

开发模式下，API 请求会自动代理到 `http://localhost:8000`（后端服务）。

## 构建生产版本

```bash
pnpm build
# 或
npm run build
```

构建产物在 `dist/` 目录下。

## Docker 部署

1. 构建镜像
```bash
docker build -t zhijing-admin .
```

2. 运行容器
```bash
docker run -d \
  --name zhijing-admin \
  -p 80:80 \
  zhijing-admin
```

## 页面说明

| 页面 | 路径 | 功能 |
|------|------|------|
| 仪表盘 | /dashboard | 数据概览、统计图表 |
| 设备管理 | /devices | 设备列表、添加、编辑、删除、控制 |
| 记忆管理 | /memories | 对话历史、偏好习惯、图像记忆 |
| 系统设置 | /settings | AI 服务配置、系统参数 |

## 开发说明

### API 代理配置

开发环境下，`vite.config.ts` 中配置了 API 代理：

```typescript
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8000',
      changeOrigin: true,
    },
  },
}
```

### 组件自动导入

项目配置了 Element Plus 组件和 Vue API 的自动导入，无需手动 import。

### 代码规范

- 使用 ESLint + Prettier 进行代码检查和格式化
- 组件使用 `<script setup>` 语法
- 使用 TypeScript 进行类型检查
