# 知境中枢 - 功能需求文档

> 版本：v1.0  
> 更新日期：2026-01-09

## 1. 项目概述

知境中枢是一个智能家居对话平台，通过 AI 能力实现自然语言交互、设备控制和个性化记忆服务。支持云端和私有化部署。

## 2. 核心功能模块

### 2.1 记忆层

#### 2.1.1 本地记忆（存储在本地向量数据库）

**文本记忆**
- 对话历史存储和检索
- 感知数据记录（环境状态、事件日志）
- 支持语义检索（向量相似度搜索）
- 记忆的增删改查

**偏好习惯记忆**
- 用户操作习惯学习（如：每天 7 点开净化器）
- 设备使用偏好（如：空调常用 26 度）
- 场景联动规则自动生成
- 习惯数据统计分析

**图像记忆**
- 人脸特征存储和识别
- 感知视频关键帧存储
- 图像场景标签提取
- 本地图像语义检索

#### 2.1.2 外部记忆（调用第三方 API）

**外部文本**
- 对接外部知识库 API
- 第三方数据源查询
- 外部搜索引擎集成

**外部图像（AI 相册）**
- 对接外部 AI 相册服务 API
- 自然语言查询照片（如："找去年在海边的照片"）
- 人物/场景/时间多维度检索
- 相册内容同步和缓存策略

### 2.2 决策层

#### 2.2.1 安全防护
- 敏感指令二次确认
- 异常行为检测和告警
- 权限分级管理
- 操作日志审计

#### 2.2.2 设备控制
- 设备状态查询
- 单设备控制指令
- 场景联动（多设备协同）
- 定时任务调度

#### 2.2.3 语音交互
- 实时语音识别（ASR）
- 意图理解和槽位提取
- 多轮对话管理
- 语音合成输出（TTS）

### 2.3 设备层

#### 2.3.1 感知模块
| 能力 | 说明 |
|------|------|
| 设备状态 | 实时采集设备运行状态 |
| 音频理解 | 环境音识别、异常声音检测 |
| 语音识别 | 实时语音转文字 |
| 图像理解 | 摄像头画面分析 |

#### 2.3.2 动作模块
| 能力 | 说明 |
|------|------|
| 音频输出 | 语音播报、提示音 |
| 设备控制 | 下发控制指令到设备 |
| 视频输出 | 屏幕显示（可选） |

### 2.4 设备端

#### 2.4.1 净化器
- 开关控制
- 档位调节（低/中/高/自动）
- 滤芯状态查询
- PM2.5 数据上报

#### 2.4.2 喂鱼器
- 手动投喂
- 定时投喂计划
- 投喂量调节
- 余粮检测告警

## 3. 管理端功能

### 3.1 设备管理
- 设备列表和状态总览
- 设备添加/删除/编辑
- 设备分组管理

### 3.2 记忆管理
- 对话历史查看
- 记忆数据导出
- 敏感数据清理

### 3.3 系统配置
- AI 模型参数配置
- 用户权限管理
- 系统日志查看


